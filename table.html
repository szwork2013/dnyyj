<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>大宁商业国际广场</title>
    <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
    <script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="//cdn.bootcss.com/mustache.js/2.1.3/mustache.min.js"></script>
    <script src="js/service.js"></script>
</head>

<body>
    <div>
        <a class="btn btn-default" href="#" role="button">用户抽奖次数统计</a>
        <a class="btn btn-default" href="#" role="button">页面统计</a>
    </div>
    <div class="row col-md-4">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th data-field="id">姓名</th>
                    <th data-field="name">电话号码</th>
                    <th data-field="price">抽奖次数</th>
                </tr>
            </thead>
            <tbody id="userLotteyTbody">

            </tbody>
        </table>
    </div>
    <script id="userTableTpl" type="template">
		{{#userLotteryList}}
    	<tr>
    		<td>{{wu_name}}</td>
    		<td>{{wu_phone}}</td>
    		<td>{{count}}</td>
    	</tr>
    	{{/userLotteryList}}
    </script>
    <script>
    	$(function() {
			service.userLotteryCount(function(data) {
				var userLotteryObj = {
					userLotteryList: data
				};
				renderUserLotteryData(userLotteryObj);
			});

			function renderUserLotteryData(userLotteryObj) {
				var template = $('#userTableTpl').html();
				var view = Mustache.render(template, userLotteryObj);
				$('#userLotteyTbody').html(view);
			}
    	});
    </script>
</body>

</html>
