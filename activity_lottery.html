<!DOCTYPE html>
<html lang="zh_CN">

<head>
    <title>抽奖页面</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/remodal-default-theme.css">
    <link rel="stylesheet" href="css/remodal.css">
    <style>
    body,
    p,
    ul,
    ol,
    h3 {
        margin: 0;
        padding: 0;
    }

    html,
    body {
        width: 100%;
        height: 100%;
        min-width: 320px;
        overflow: hidden;
        font-family: Microsoft Yahei;
    }

    body {
        background: url(images/bg3.jpg) no-repeat;
        background-size: 100%;
    }

    ul, ol{
        list-style-type: none;
    }

    a {
        text-decoration: none;
    }

    .activity_intro {
        display: table;
        float: right;
        width: 60px;
        height: 60px;
        margin-right: 10px;
        background-color: #ff30a4;
        color: #fff;
        border-radius: 50%;
        text-align: center;
    }

    .activity_intro > p {
        display: table-cell;
        vertical-align: middle;
    }

    header {
        padding-top: 26%;
        overflow: hidden;
    }

    .activity_sct {
        text-align: center;
        padding: 0 10px;
    }

    .activity_sct > h3 {
        color: #7466c5;
        font-weight: normal;
        margin-bottom: 10px;
    }

    .activity_list > li {
        float: left;
        width: 45%;
        height: 50px;
        margin-right: 10%;
        margin-bottom: 10px;
        background-color: #7466c5;
    }

    .activity_list > li:nth-child(2n) {
        margin-right: 0;
    }

    .activity_list > li > p {
        color: #fff;
        line-height: 25px;
        font-size: 18px;
    }

    .activity_lottery {
        padding: 0 10px;
    }

    .clearfix:after {
        content: '';
        display: block;
        height: 0;
        visibility: hidden;
        clear: both;
    }

    .activity-lottery-machine {
        position: relative;
        padding: 0 10px;
    }

    .activity-lottery-machine > img {
        max-width: 100%;
    }

    .btn {
        float: left;
        width: 48%;
        height: 40px;
        line-height: 40px;
        background-color: #ff30a4;
        color: #fff;
        text-align: center;
        -webkit-tap-highlight-color: transparent;
    }

    .btn:active {
        background-color: #e22790;
    }

    .btn:nth-child(1) {
        margin-right: 4%;
    }

    .activity-lottery-btn-group {
        margin-top: 10px;
    }

    .activity-machine-container {
        position: absolute;
        top: 36px;
        bottom: 20px;
        left: 30px;
        right: 40px;
        z-index: 100;
    }

    .slotMachine {
        float: left;
        width: 24%;
        height: 90%;
        padding: 0px;
        overflow: hidden;
        text-align: center;
        background: url(images/icon-machine-square.png) no-repeat;
        background-size: 100%;
    }

    .slotMachine:not(:last-child) {
        margin-right: 10%;
    }

    .slotMachine .slot {
        height: 100px;
        background-position-x: 55%;
        background-repeat: no-repeat;
    }

    .slot1 {
        background-image: url("images/icon-cd.png");
    }

    .slot2 {
        background-image: url("images/icon-sound-byte.png");
    }

    .slot3 {
        background-image: url("images/icon-ticket-movie.jpg");
    }

    .slot4 {
        background-image: url("images/iocn-ticket-music.png");
    }

    .modal-content{
        color: #fff;
        margin-bottom:10px;
    }

    .f-pink{
        color: #ff30a4;
    }
    .f-s18{
        font-size: 18px;
    }

    .modal-content.activity_rules{
        text-align: left;
    }

    .modal-content.activity_rules > h3{
        font-size: 16px;
        margin-bottom: 10px;
    }

    .modal-content.activity_rules ol {
        margin-bottom: 40px;
    }
    .modal-content.activity_rules li {
        font-size: 14px;
    }

    .activity_share{
        float:right;
        width: 232px;
        height: 174px;
        background: url(images/icon-share.png) no-repeat right;
        background-size: 70%;
    }
    </style>
</head>

<body>
    <header>
        <div class="activity_intro">
            <p>活动<br/>细则</p>
        </div>
    </header>
    <section class="activity_sct">
        <h3>请选择场次</h3>
        <ul id="activity_list" class="activity_list clearfix">
            <li>
                <P>戴佩妮</P>
                <P>10月17日</P>
            </li>
            <li>
                <p>EXIT</p>
                <p>10月18日</p>
            </li>
            <li>
                <p style="font-size:14px;">安来宁/甜品店/昆曲</p>
                <p>10月24日</p>
            </li>
            <li>
                <p>熊天平</p>
                <p>10月25日</p>
            </li>
        </ul>
    </section>
    <section class="activity_lottery">
        <div class="activity-lottery-machine">
            <img src="images/machine-main.png" alt="抽奖">
            <div class="activity-machine-container">
                <div id="machine1" class="slotMachine">
                    <div class="slot slot1"></div>
                    <div class="slot slot2"></div>
                    <div class="slot slot3"></div>
                    <div class="slot slot4"></div>
                </div>
                <div id="machine2" class="slotMachine">
                    <div class="slot slot1"></div>
                    <div class="slot slot2"></div>
                    <div class="slot slot3"></div>
                    <div class="slot slot4"></div>
                </div>
                <div id="machine3" class="slotMachine">
                    <div class="slot slot1"></div>
                    <div class="slot slot2"></div>
                    <div class="slot slot3"></div>
                    <div class="slot slot4"></div>
                </div>
            </div>
        </div>
        <div class="activity-lottery-btn-group clearfix">
            <a id="slotMachineButton" class="btn">继续抽奖</a>
            <a class="btn" href="#">我的门票</a>
        </div>
    </section>
    <div data-remodal-id="modal" role="dialog" aria-labelledby="modalTitle" aria-describedby="modalDesc">
        <button data-remodal-action="confirm" class="remodal-confirm">关闭</button>
    </div>
</body>
<script src="js/jquery-1.10.1.min.js"></script>
<script src="js/jquery.slotmachine.min.js"></script>
<script src="js/remodal.min.js"></script>
<script>
    window.REMODAL_GLOBALS = {
      NAMESPACE: 'modal',
      DEFAULTS: {
        hashTracking: false
      }
    };
</script>
<script id="templateE" type="text/x-template">
    <div class="modal-content activity_rules">
        <h3>活动方式：</h3>
        <ol>
            <li>1、关注大宁国际官方微信（<a class="f-pink">lifeHub_DANING</a>），回复关键词"抢票"获取抢票链接。</li>
            <li>2、输入基本信息，选择场次，按动开关，开始抽奖。摇出三个"2015大宁音乐季"字样，即可获得对应场次门票一张。</li>
        </ol>
        <h3>活动规则：</h3>
        <ol>
            <li>1、每人每天最多三次抽奖机会，点击"继续抽奖"获取更多机会；</li>
            <li>2、所用参与抢票的用户，还将获得一次幸运中奖机会！我们将于10月8日公布幸运用户名单，详情可点击微信菜单栏【乐享大宁】/【大宁音乐季】查看；</li>
            <li>3、门票数量有限，一人一张，凭票入场，转发、截图无效。</li>
        </ol>
    </div>
</script>

<script id="templateF" type="text/x-template">
    <div class="modal-content clear">
        <a class="activity_share"></a>
        <p style="clear:both;"></p>
        <p>好音乐，和好朋友一起听</p>
        <p>分享这个好消息，增加一次抽奖机会吧~</p>
    </div>
</script>
<script>
$(function() {
    var machine1 = $("#machine1").slotMachine({
        active: 0,
        delay: 500
    });

    var machine2 = $("#machine2").slotMachine({
        active: 1,
        delay: 500
    });

    var machine3 = $("#machine3").slotMachine({
        active: 2,
        delay: 500
    });

    function onComplete(active) {
        switch (this.element[0].id) {
            case 'machine1':
                $("#machine1Result").text("Index: " + this.active);
                break;
            case 'machine2':
                $("#machine2Result").text("Index: " + this.active);
                break;
            case 'machine3':
                $("#machine3Result").text("Index: " + this.active);
                break;
        }
    }

    $("#slotMachineButton").click(function() {

        machine1.shuffle(5, onComplete);

        setTimeout(function() {
            machine2.shuffle(5, onComplete);
        }, 500);

        setTimeout(function() {
            machine3.shuffle(5, onComplete);
        }, 1000);

    })

    machine1.setRandomize(function() {
        return 3;
    });
    machine2.setRandomize(function() {
        return 3;
    });
    machine3.setRandomize(function() {
        return 3;
    });


    var templateA = '<div class="modal-content">' +
                        '<p>您已经获取该场次门票</p>' +
                        '<p>请在<span class="f-pink f-s18">\"我的门票\"</span>中查询门票信息</p>' +
                        '<p>你可以选择其他场次获取门票哦~</p>' +
                    '</div>';

    var templateB = '<div class="modal-content">' +
                        '<p>恭喜您获得大宁音乐季门票一张</p>' +
                        '<p>快到<span class="f-pink f-s18">\"我的门票\"</span>中查询门票信息</p>'  +
                    '</div>';

    var templateC = '<div class="modal-content">' +
                        '<p>获得门票只有一步之遥</p>' +
                        '<p>点击<span class="f-pink f-s18">\"继续抽奖\"</span>马上获取门票</p>' +
                        '<p>每人每天有三次机会哦！</p>' +
                    '</div>';

    var templateD = '<div class="modal-content">' +
                        '<p>今天的抽奖次数已经用完啦!</p>' +
                        '<p>别灰心，明天继续来参与哦！</p>' +
                        '<p>所有参与抢票用户</p>' +
                        '<p>还将获得一次幸运中奖机会</p>' +
                        '<p>我们将于<span class="f-pink">10月8日</span>公布幸运用户名单</p>' +
                        '<p>详情可点击微信菜单栏</p>' +
                        '<p><span class="f-pink">【乐享大宁】/</span><span class="f-pink">【大宁音乐季】</span>查看</p>' +
                    '</div>'

    var modalInstance = $('[data-remodal-id=modal]')
    .prepend($('#templateF').html())
    .css({
        'position': 'absolute',
        'right': '0'
    })
    .remodal({
        closeOnOutsideClick: false
    })

    modalInstance.open();
});
</script>

</html>
